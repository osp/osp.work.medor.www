{% extends "subscribe/base_forms.html" %}
{% load i18n %}

{% block head %}
{{ wizard.form.media }}
{% endblock %}

{% block content %}
    <h2>Je m’abonne</h2>

    <div id="steps">
        <div class="active">Enregistrement</div>
        <p>Si 3779 personnes font comme vous, vous recevrez votre premier
        Médor en&nbsp;septembre&nbsp;2015. Si ce n'est pas le cas, Médor vous
        remboursera les 60&nbsp;euros.</p>
    </div>

    <form id="souscription" action="" method="post" class="step-{{ wizard.steps.step1 }}">
        {% csrf_token %}
        {{ wizard.management_form }}


        {% if wizard.form.forms %}
            {{ wizard.form.management_form }}
            {% for form in wizard.form.forms %}
                {{ form }}
            {% endfor %}
        {% else %}
            {{ form.non_field_errors }} 

        <div class="box">
            <div class="required">
                {{ form.title.errors }}
                {{ form.title.label_tag }}
                {{ form.title }}
            </div>
            <div class="required">
                {{ form.first_name.errors }}
                {{ form.first_name.label_tag }}
                {{ form.first_name }}
            </div>
            <div class="required">
                {{ form.last_name.errors }}
                {{ form.last_name.label_tag }}
                {{ form.last_name }}
            </div>
            <div class="required">
                {{ form.email.errors }}
                {{ form.email.label_tag }}
                {{ form.email }}
            </div>
        </div>
        <div class="box">
            <h3>Adresse de livraison :</h3>
            <div class="required">
                {{ form.street.errors }}
                {{ form.street.label_tag }}
                {{ form.street }}
            </div>
            <div class="required">
                {{ form.number.errors }}
                {{ form.number.label_tag }}
                {{ form.number }}
            </div>
            <div>
                {{ form.letterbox.errors }}
                {{ form.letterbox.label_tag }}
                {{ form.letterbox }}
            </div>
            <div class="required">
                {{ form.city.errors }}
                {{ form.city.label_tag }}
                {{ form.city }}
            </div>
            <div class="required">
                {{ form.zip_code.errors }}
                {{ form.zip_code.label_tag }}
                {{ form.zip_code }}
            </div>
            <div class="required">
                {{ form.country.errors }}
                {{ form.country.label_tag }}
                {{ form.country }}
            </div>
        </div>
        {% endif %}


        {% if wizard.steps.prev %}
        <div id="nav">
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">Corriger</button>
        </div>
        {% endif %}

        <div id="confirm">
            <input id="prendre-part" type="submit" value="S’abonner"/>
        </div>
    </form>
{% endblock %}

{% block js %}
<script src="{{ STATIC_URL }}components/jquery/jquery.min.js"></script>
<script>
$(function() {
    var $is_gift = $('#id_0-is_gift');
    var $additional = $('.additional');

    $is_gift.on('change', function(event) {
        if ($(this).prop("checked")) {
            $additional.show();  
        } else {
            $additional.hide();  
        };
    });

    if ($is_gift.prop("checked")) {
        $additional.show();  
    } else {
        $additional.hide();  
    };
});
</script>
{% endblock %}
