{% extends "subscribe/base_forms.html" %}
{% load i18n %}

{% block head %}
{{ wizard.form.media }}
{% endblock %}

{% block content %}
    <h2>Je m’abonne</h2>

    <div id="steps">
        <div class="active">Enregistrement</div>
        <p>Si 3779 personnes font comme vous, vous recevrez votre premier
        Médor en&nbsp;septembre&nbsp;2015. Si ce n'est pas le cas, Médor vous
        remboursera les 60&nbsp;euros.</p>
    </div>

    <form id="souscription" action="" method="post" class="step-{{ wizard.steps.step1 }}">
        {% csrf_token %}
        {{ wizard.management_form }}


        {% if wizard.form.forms %}
            {{ wizard.form.management_form }}
            {% for form in wizard.form.forms %}
                {{ form }}
            {% endfor %}
        {% else %}
            {{ form.non_field_errors }} 

            <div class="form-wrapper">
                <div class="form-chunk">
                    <div class="box table">
                        <div class="table-row required">
                            {{ form.title.label_tag }}
                            <div class="table-cell">
                            {{ form.title }}
                            {{ form.title.errors }}
                            </div>
                        </div>
                        <div class="required table-row">
                            {{ form.first_name.label_tag }}
                            <div class="table-cell">
                            {{ form.first_name }}
                            {{ form.first_name.errors }}
                            </div>
                        </div>
                        <div class="required table-row">
                            {{ form.last_name.label_tag }}
                            <div class="table-cell">
                            {{ form.last_name }}
                            {{ form.last_name.errors }}
                            </div>
                        </div>
                        <div class="required table-row">
                            {{ form.email.label_tag }}
                            <div class="table-cell">
                            {{ form.email }}
                            {{ form.email.errors }}
                                lkjdslsdkj dsmlkdsj mdslkj dsmlkdsj mldskj dsmlkjds mldskj dsmlkjds mlkdsj 
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-chunk">
                    <div class="box table">
                        <h3>Adresse de livraison :</h3>
                        <div class="required table-row">
                            {{ form.is_gift.label_tag }}
                            <div class="table-cell">
                            {{ form.is_gift }}
                            {{ form.is_gift.errors }}
                            </div>
                        </div>
                        <div class="required additional table-row">
                            <label for="id_0-recipient_first_name">Prénom</label>
                            <div class="table-cell">
                            {{ form.recipient_first_name }}
                            {{ form.recipient_first_name.errors }}
                            </div>
                        </div>
                        <div class="required additional table-row">
                            <label for="id_0-recipient_last_name">Nom</label>
                            <div class="table-cell">
                            {{ form.recipient_last_name }}
                            {{ form.recipient_last_name.errors }}
                            </div>
                        </div>
                        <div class="additional table-row">
                            <label for="id_0-recipient_email">Courriel</label>
                            <div class="table-cell">
                            {{ form.recipient_email }}
                            {{ form.recipient_email.errors }}
                            </div>
                        </div>
                        <div class="required table-row">
                            {{ form.street.label_tag }}
                            <div class="table-cell">
                            {{ form.street }}
                            {{ form.street.errors }}
                            </div>
                        </div>
                        <div class="required table-row">
                            {{ form.number.label_tag }}
                            <div class="table-cell">
                            {{ form.number }}
                            {{ form.number.errors }}
                            </div>
                        </div>
                        <div class="table-row">
                            {{ form.letterbox.label_tag }}
                            <div class="table-cell">
                            {{ form.letterbox }}
                            {{ form.letterbox.errors }}
                            </div>
                        </div>
                        <div class="required table-row">
                            {{ form.city.label_tag }}
                            <div class="table-cell">
                            {{ form.city }}
                            {{ form.city.errors }}
                            </div>
                        </div>
                        <div class="required table-row">
                            {{ form.zip_code.label_tag }}
                            <div class="table-cell">
                            {{ form.zip_code }}
                            {{ form.zip_code.errors }}
                            </div>
                        </div>
                        <div class="required table-row">
                            {{ form.country.label_tag }}
                            <div class="table-cell">
                            {{ form.country }}
                            {{ form.country.errors }}
                                lkjdslsdkj dsmlkdsj mdslkj dsmlkdsj mldskj dsmlkjds mldskj dsmlkjds mlkdsj 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}


        {% if wizard.steps.prev %}
        <div id="nav">
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">Corriger</button>
        </div>
        {% endif %}

        <div id="confirm">
            <input id="prendre-part" type="submit" value="S’abonner"/>
        </div>
    </form>
{% endblock %}

{% block js %}
<script src="{{ STATIC_URL }}components/jquery/jquery.min.js"></script>
<script>
$(function() {
    var $is_gift = $('#id_0-is_gift');
    var $additional = $('.additional');

    $is_gift.on('change', function(event) {
        if ($(this).prop("checked")) {
            $additional.show();  
        } else {
            $additional.hide();  
        };
    });

    if ($is_gift.prop("checked")) {
        $additional.show();  
    } else {
        $additional.hide();  
    };
});
</script>
{% endblock %}
